/* --- Toggle as sliding pill --- */
.theme-toggle,
.app-navbar .nav-right .theme-toggle,
#theme-toggle {
  position: relative !important;
  width: 56px !important;
  height: 28px !important;
  padding: 4px !important;
  display: inline-flex !important;
  align-items: center !important;
  vertical-align: middle !important;
  justify-content: space-between !important;
  gap: 6px !important;
  border-radius: 30px !important;
  background: #ffffff !important;
  cursor: pointer !important;
  border: none !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08) !important;
  transition: all 0.3s ease !important;
}

.theme-toggle:hover,
.app-navbar .nav-right .theme-toggle:hover,
#theme-toggle:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.12) !important;
}
.nav-right {
  display: flex;
  align-items: center;
  gap: 18px; /* adds spacing between links, toggle, and logout */
}

.theme-toggle i { font-size: 12px; color: #556; opacity: 0.85; transition: opacity 0.2s ease; pointer-events: none; }

/* the knob */
.theme-toggle::after {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  width: 22px;
  height: 22px;
  background: #ffffff;
  border-radius: 50%;
  box-shadow: 0 4px 8px rgba(0,0,0,0.18);
  transition: transform 0.24s ease, background-color 0.24s ease;
}

/* active (dark) — move knob to the right and reduce sun opacity */
.theme-toggle.active { background: #2b2b2b; }
.theme-toggle.active::after { transform: translateX(28px); background: #111; }
.theme-toggle.active i.fa-sun { opacity: 0.35; }
.theme-toggle:not(.active) i.fa-moon { opacity: 0.35; }

/* Dark mode styles */
body.dark-mode {
    background-color: #20282a !important;
    color: #ffffff !important;
}

/* Theme variables — centralize palette for light/dark mode */
:root {
  --accent: #2EB28A;
  --accent-dark: #259673;
  --card-dark-bg: #232E2F; /* default dark card background (replaces #374151 usage) */
  --muted-dark: #374151;   /* legacy muted/dark slate color (centralized) */
  --row-dark-bg: #2b3b3b;
  --card-dark-text: #e6efec;
}

/* Dark mode variable overrides (if needed) */
body.dark-mode {
  --card-dark-bg: #232E2F;
  --row-dark-bg: #2b3b3b;
  --card-dark-text: #e6efec;
}

body.dark-mode h1 {
    color: #fff !important;
}

/* Dark mode table styles */
body.dark-mode table {
    background-color: #20282a !important;
    color: #ffffff !important;
}

body.dark-mode th {
    background-color: #26B07A  !important;
    color: #ffffff !important;
    border-color: #26B07A 
     !important;
}

body.dark-mode td {
    background-color: #263033 !important;
    color: #ffffff !important;
    border-color: #232e2f !important;
}

body.dark-mode .filters-card {
    background-color: #263033 !important;
    border-color: #232e2f !important;
    color: #ffffff !important;
}

body.dark-mode input[type="text"],
body.dark-mode select {
    background-color: #232e2f !important;
    border-color: #263033 !important;
    color: #ffffff !important;
}

body.dark-mode .apply-filters,
body.dark-mode .download-button {
    background-color: #26B07A !important;
    color: #ffffff !important;
    border: none !important;
}

body.dark-mode .clear-all {
    color: #26B07A !important;
    background: transparent !important;
    border: 1px solid #26B07A !important;
}

/* Active filters styling in dark mode */
body.dark-mode .active-filters {
    background-color: #242937 !important;
    border-color: #2c3344 !important;
}

/* --- Accent colors & KPI cards --- */
:root {
  /* Accent / brand colors tuned to match the screenshot */
  --accent: #26B07A;         /* bright mint/teal */
  --accent-dark: #1F8C67;    /* darker teal for headers */
  --card-dark-bg: #232e2f;   /* KPI / card dark background */
  --row-dark-bg: #263033;    /* table row dark shade */
  --bg-dark-main: #20282a;   /* overall page dark background */
  --header-start: #0f6b57;   /* navbar gradient start */
  --header-end: #25b07a;     /* navbar gradient end */
}

/* KPI cards with left accent bar like the screenshot */
.card {
  border-radius: 12px;
  background: #fff;
  position: relative;
  overflow: hidden;
  transition: background-color 0.3s ease, color 0.3s ease;
}
.card::before {
  content: "";
  position: absolute;
  left: 8px;
  top: 18px;
  bottom: 18px;
  width: 8px;
  background: var(--accent);
  border-radius: 6px;
  box-shadow: 0 1px 0 rgba(0,0,0,0.06);
}

/* dark-mode card */
body.dark-mode .card {
  background: var(--card-dark-bg);
  color: #e9f7f1;
}

/* --- Search + Add button styling --- */
.search-container {
  display:flex;
  align-items:center;
  gap:8px;
  border-radius: 8px;
  border: 1px solid rgba(46,178,138,0.9); /* accent border */
  background: rgba(46,178,138,0.03);
}
.search-container input {
  border: none;
  background: transparent;
  color: inherit;
  width:100%;
  outline: none;
}

/* rounded green Add button */
.btn-primary {
  background: var(--accent);
  border-color: var(--accent);
  color: #fff;
  border-radius: 8px;
  padding: 8px 12px;
}
.btn-primary:hover {
  background: var(--accent-dark);
  border-color: var(--accent-dark);
}

/* --- Table look: green header, dark rows --- */
.employee-table {
  width: 100%;
  /* border-collapse: separate; */
  border-radius: 10px;
  border-spacing: 0;
  background: transparent;
  color: inherit;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

table.employee-table thead tr{
  border-top-left-radius: 10px !important;
}

.employee-table thead th {
  background: var(--accent);
  color: #fff;
  font-weight: 600;
  padding: 16px;

  border-bottom: none;
}
.employee-table tbody tr {
  background: #2b3b3b; /* default dark-ish row */
  color: #e1e8e8;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}
.employee-table tbody tr td {
  padding: 14px 16px;
}

/* light variant: if not in dark-mode, header still green but rows lighter */
body:not(.dark-mode) .employee-table tbody tr { background: #f1f5f5; color: #2c3838; border-bottom: 1px solid rgba(0,0,0,0.06); }

/* dark-mode overrides */
body.dark-mode {
  background-color: var(--bg-dark-main) !important;
  color: #e9f0ef !important;
}
body.dark-mode .search-container {
  /* keep the dark panel background but make the border clearly visible at all times */
  background: var(--card-dark-bg) !important;
  /* stronger always-on border per request */
  border: 1px solid rgba(255,255,255,0.10) !important;
  box-shadow: none !important;
}

/* when input inside search container is focused, show a green-accent border/glow */
body.dark-mode .search-container:focus-within {
  border-color: rgba(46,178,138,0.16) !important; /* subtle green tint */
  box-shadow: 0 4px 18px rgba(46,178,138,0.06) !important;
}
body.dark-mode .employee-table thead th { background: var(--accent-dark); }
body.dark-mode .employee-table tbody tr { background: var(--row-dark-bg); color: #d7e7e3; border-bottom: 1px solid rgba(255,255,255,0.04); }

/* Make all containers and content areas dark */
body.dark-mode .dashboard-container,
body.dark-mode .main-container,
body.dark-mode main,
body.dark-mode .container,
body.dark-mode .content-wrapper,
body.dark-mode .app-content {
  background-color: var(--bg-dark-main) !important; /* very dark */
  color: #e9f0ef !important;
}

/* Navbar styling intentionally left to original styles in header/main.css.
   Do not override navbar here so the header keeps its intended color in both
   light and dark modes. */

/* KPI cards: ensure dark card background and green left accent visible */
body.dark-mode .card {
  background: var(--card-dark-bg) !important;
  color: #eaf5f0 !important;
}
body.dark-mode .card::before {
  background: var(--accent) !important;
}

/* Employee table header: match the bright teal */
body.dark-mode .employee-table thead th {
  background: var(--accent) !important;
  color: #fff !important;
}

/* Table body rows: slightly lighter than page bg but darker than card */
body.dark-mode .employee-table tbody tr {
  background: var(--row-dark-bg) !important;
}

/* Ensure the header/navbar keeps the original brand color when dark mode is toggled */
body.dark-mode .app-navbar,
body.dark-mode .app-navbar .app-navbar-inner {
  background: #2EB28A !important; /* keep brand teal */
  border-bottom: 1px solid #2EB28A !important; /* remove grey line */
}

/* Keep nav links readable */
body.dark-mode .app-navbar .nav-link {
  color: #ffffff !important;
}

/* ------------------------------------------------------------------
   Enforce consistent table header styling across all device sizes
   and prevent any responsive media queries from changing the table
   header color (avoids unexpected blue/alternate colors on small screens)
   ------------------------------------------------------------------ */
.employee-table thead th {
  background: #2EB28A !important; /* brand teal */
  color: #ffffff !important;
}

/* Also force the same color in dark-mode so the header remains consistent */
body.dark-mode .employee-table thead th {
  background: #2EB28A !important;
  color: #ffffff !important;
}

/* ------------------------------------------------------------------
   Force consistent table and card colors across all media queries
   This prevents any responsive rules from unintentionally changing
   table or card colors on smaller devices.
   ------------------------------------------------------------------ */
/* Desktop / Light mode defaults */
.employee-table thead th {
  background: #2EB28A !important;
  color: #ffffff !important;
}
.employee-table tbody tr {
  background: #f1f5f5 !important;
  color: #2c3838 !important;
}

/* Dark mode defaults */
body.dark-mode .employee-table tbody tr {
  background: var(--row-dark-bg) !important;
  color: #d7e7e3 !important;
}

/* Ensure employee card headers stay consistent */
.employee-card .card-header,
body.dark-mode .employee-card .card-header {
  background: #f8fafc !important; /* default light header */
  color: inherit !important;
}

/* In dark mode keep the card header darker but consistent (no blue tints) */
body.dark-mode .employee-card .card-header {
  background: var(--card-dark-bg) !important;
  color: #f9fafb !important;
}

/* Prevent media queries from overriding the table/card palette */
@media (max-width: 1024px) {
  .employee-table thead th,
  .employee-table tbody tr,
  .employee-card .card-header {
    background: unset !important; /* allow the rules above to win */
    color: inherit !important;
  }
}

/* Remove any pseudo-elements that might be drawing a dark panel behind nav items */
.app-navbar .app-navbar-inner::before,
.app-navbar .app-navbar-inner::after,
.app-navbar .nav-right::before,
.app-navbar .nav-right::after {
  display: none !important;
  content: none !important;
}

/* Make sure nav items sit above any accidental background and keep spacing */
/* Ensure nav-right positioning/background overrides only apply in dark mode.
   Previously these rules ran unscoped and affected the header in light mode.
   Scope them to `body.dark-mode` so light mode preserves its intended styles. */
body.dark-mode .app-navbar .nav-right,
body.dark-mode .app-navbar .nav-right a,
body.dark-mode .app-navbar .nav-right button {
  position: relative !important;
  z-index: 5 !important;
  background: transparent !important;
}

/* If any nav links were changed to display:block with background, force inline-block */
.app-navbar .nav-right .nav-link {
  display: inline-block !important;
  background: transparent !important;
}

/* Make sure the logout button remains a white pill and visible on the teal header */
.app-navbar .nav-right .logout-btn,
.logout-btn {
  background: #ffffff !important;
  color: var(--accent) !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.12) !important;
  border-radius: 25px !important;
  padding: 8px 20px !important;
  transition: all 0.3s ease !important;
}

.app-navbar .nav-right .logout-btn:hover,
.logout-btn:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 6px 15px rgba(0,0,0,0.15) !important;
}

/* Make the theme toggle clearly visible on the teal header in dark mode
   (keep it light so the icons remain readable). Override .active here too.) */
body.dark-mode .app-navbar #theme-toggle,
body.dark-mode .app-navbar #theme-toggle.active {
  background: #ffffff !important;
  color: var(--accent-dark) !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.12) !important;
  border: 1px solid rgba(0,0,0,0.06) !important;
}
body.dark-mode .app-navbar #theme-toggle .fa-moon,
body.dark-mode .app-navbar #theme-toggle .fa-sun {
  color: #2c3838 !important;
}

/* Scope guide/modal inner-banner fixes to the guide overlay only.
   Previously these rules were global and could affect other components
   that reuse the same class names. Prefixing with `.user-guide-overlay`
   confines these overrides to the user guide markup. */
.user-guide-overlay .guide-content .guide-header,
.user-guide-overlay .guide-content .guide-body,
.user-guide-overlay .guide-content .guide-body p,
.user-guide-overlay .guide-tooltip-inner .guide-header,
.user-guide-overlay .guide-tooltip-inner .guide-body,
.user-guide-overlay .guide-tooltip-inner .guide-body p {
  background: transparent !important;
  box-shadow: none !important;
}

/* Keep the overall guide container background as intended (white in light mode)
   but scoped so other `.guide-content` usages are unaffected. */
.user-guide-overlay .guide-content {
  background: #ffffff !important;
}

/* In dark mode, allow the existing dark backgrounds to apply (scoped). */
/* In dark mode, ensure the guide container and its tooltip have explicit dark backgrounds
   instead of unsetting them. This prevents other broad 'transparent' rules from making
   the tooltip/modal appear see-through. */
body.dark-mode .user-guide-overlay .guide-content,
body.dark-mode .user-guide-overlay .guide-tooltip {
  /* Force the modal and tooltip background to the requested dark panel color */
  background: #232E2F !important;
  color: #e6efec !important;
  border-color: #263033 !important;
}

/* Remove the unwanted footer/banner background in light mode within the guide only */
.user-guide-overlay .guide-content .guide-footer,
.user-guide-overlay .guide-tooltip-inner .guide-footer,
.user-guide-overlay .guide-footer,
.user-guide-overlay .guide-step-indicator,
.user-guide-overlay .guide-buttons {
  background: transparent !important;
  border-top: none !important;
  box-shadow: none !important;
}

/* Ensure step indicator doesn't have its own background or border in light mode (scoped) */
.user-guide-overlay .guide-step-indicator {
  background: transparent !important;
  border: none !important;
}

body.dark-mode .dashboard-main,
body.dark-mode .search-add-container,
body.dark-mode .table-responsive {
    background: transparent;
    color: #e6efec;
}

/* If there's a white wrapper panel, dim it in dark mode */
body.dark-mode .panel, body.dark-mode .card, body.dark-mode .search-add-container {
  /* Use card dark background to remove bluish-gray and use #232e2f */
  background-color: var(--card-dark-bg) !important;
  box-shadow: 0 6px 20px rgba(0,0,0,0.6);
}

/* Force higher contrast text in dark mode */
body.dark-mode,
body.dark-mode .card,
body.dark-mode .card .card-content,
body.dark-mode .employee-table,
body.dark-mode .employee-table td,
body.dark-mode .employee-table th,
body.dark-mode .mobile-employees-container,
body.dark-mode .search-container,
body.dark-mode .dashboard-main {
    color: #ffffff !important;
}

/* Make table row text brighter and ensure icons/buttons remain visible */
body.dark-mode .employee-table tbody tr td { color: #e6f0ee !important; }
body.dark-mode .employee-table thead th { color: #ffffff !important; }
body.dark-mode .btn { color: #ffffff !important; background-color: transparent; }
body.dark-mode .btn-primary { color: #ffffff !important; background-color: #2EB28A !important; }
body.dark-mode .card .card-title, body.dark-mode .card .card-value { color: #ffffff !important; }

/* Force dark mode on most content elements, but exclude header/navbar so the
   navbar keeps its original color from the site's header styles. */
/* Force dark mode on all potential white elements (excluding header) */
body.dark-mode div,
body.dark-mode section,
body.dark-mode aside,
body.dark-mode footer,
body.dark-mode .panel,
body.dark-mode .card,
body.dark-mode .box,
body.dark-mode .container-fluid,
body.dark-mode .content-section {
  /* Use the global card dark background variable to keep panels consistent */
  background-color: var(--card-dark-bg);
}

/* Handle form elements in dark mode */
body.dark-mode input,
body.dark-mode select,
body.dark-mode textarea {
    background-color: #222626 !important;
    color: #e6f0ee !important;
    border-color: #1e2223 !important;
}

/* Theme toggle container positioning */
.theme-toggle-container {
    position: absolute;
    top: 20px;
    right: 20px;
    z-index: 1000;
    display: flex;
    justify-content: flex-end;
    align-items: center;
}

/* Dark-mode overrides for Time Log and History pages to ensure text is visible */
body.dark-mode .timelog-filters,
body.dark-mode .table-container,
body.dark-mode .table-wrapper,
body.dark-mode .filters-card,
body.dark-mode .desktop-table-container,
body.dark-mode .mobile-cards,
body.dark-mode .history-card,
body.dark-mode .no-results {
  /* Use card dark background to remove the blue-gray panels */
  background-color: var(--card-dark-bg) !important;
  color: #e6efec !important;
  border-color: rgba(255,255,255,0.04) !important;
  box-shadow: none !important;
}

/* Inputs, selects, and text areas on those pages */
body.dark-mode .search-container .search-input,
body.dark-mode .week-select,
body.dark-mode .filter-input,
body.dark-mode input[type="date"] {
  background-color: var(--card-dark-bg) !important;
  color: #e6efec !important;
  border: 1px solid var(--card-dark-bg) !important;
}

/* Table text/colors */
body.dark-mode .time-log-table thead.th,
body.dark-mode .history-table thead {
  background: var(--accent-dark) !important;
}
body.dark-mode .time-log-table tbody tr,
body.dark-mode .history-table tbody tr {
  background: var(--row-dark-bg) !important;
  border-bottom: 1px solid rgba(255,255,255,0.04) !important;
}
body.dark-mode .time-log-table tbody td,
body.dark-mode .history-table tbody td,
body.dark-mode .card-value,
body.dark-mode .card-title,
body.dark-mode .history-title,
body.dark-mode .history-subtitle {
  color: #e6efec !important;
}

/* Buttons on those pages */
body.dark-mode .btn-apply,
body.dark-mode .btn-download,
body.dark-mode .btn-primary,
body.dark-mode .filter-badge {
  background: var(--accent) !important;
  color: #ffffff !important;
  border: none !important;
}

/* Pagination tweaks */
body.dark-mode .page-link {
  background: transparent !important;
  border: 1px solid rgba(255,255,255,0.06) !important;
  color: #e6efec !important;
}
body.dark-mode .page-item.active .page-link {
  background: var(--accent) !important;
  color: #fff !important;
}

/* Ensure popup uses dark background and readable text */
body.dark-mode .popup-container,
body.dark-mode .popup-content {
  background: #2c383800!important;
  color: #e6efec !important;
}

/* User Guide Overlay: dark mode fix for visibility */
/* Make the overlay transparent as requested (tooltip remains opaque via its own rules) */
body.dark-mode .user-guide-overlay {
  background: transparent !important;
}

/* === Fix: targeted search input styling ===
   Make the search input have proper backgrounds for both light and dark modes. */
.search-container input,
.search-container .search-input {
  /* light-mode input: white background with dark text */
  background: #ffffff !important;
  color: #333 !important;
  border: 1px solid #ddd !important;
  border-radius: 8px;
  padding: 10px 14px;
}

body.dark-mode .search-container input,
body.dark-mode .search-container input,
body.dark-mode .search-container .search-input {
  /* Make the search input clearly visible in dark mode while keeping
     the same layout, padding and rounded corners as light mode. */
  background-color: #232E2F !important; /* slightly lighter dark background */
  color: #ffffff !important;            /* white text */
  border: 1px solid rgba(255,255,255,0.08) !important; /* thin, soft border */
  border-radius: 8px !important;        /* match light-mode corners */
  padding: 10px 14px !important;        /* match light-mode padding */
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.25) !important;
  outline: none !important;
}

/* Placeholder styling */
.search-container input::placeholder,
.search-container .search-input::placeholder {
  color: #9ca3af;
  opacity: 1;
}

body.dark-mode .search-container input::placeholder,
body.dark-mode .search-container input::placeholder,
body.dark-mode .search-container .search-input::placeholder {
  /* light gray placeholder for legibility in dark mode */
  color: #bfc6c7 !important;
  opacity: 1 !important;
}

/* Focused state */
.search-container input:focus,
.search-container .search-input:focus {
  border-color: #2EB28A !important;
  box-shadow: 0 0 0 3px rgba(46, 178, 138, 0.1) !important;
}

body.dark-mode .search-container input:focus,
body.dark-mode .search-container .search-input:focus {
  /* subtle green accent on focus */
  border-color: rgba(46,178,138,0.18) !important;
  box-shadow: 0 0 0 4px rgba(46,178,138,0.06) !important;
}

/* Final strong override: target the actual input by id and by class to force readable text
   and caret color across browsers. Keeps layout/padding the same but ensures the
   content is visible even if other styles try to dim it. */
body.dark-mode #searchEmployee,
body.dark-mode input#searchEmployee,
body.dark-mode .search-container input.search-input,
body.dark-mode .search-container input[type="text"],
body.dark-mode .search-container input[type="search"] {
  color: #ffffff !important;
  opacity: 1 !important;
  caret-color: #ffffff !important;
  -webkit-text-fill-color: #ffffff !important; /* Safari */
  background-color: #232E2F !important;
  border: 1px solid rgba(255,255,255,0.12) !important;
}

/* Ensure no parent opacity or filter hides the input text -- if a parent has opacity,
   it's harder to override with CSS; this helps but if issue persists inspect parent rules. */
body.dark-mode .search-container,
body.dark-mode .search-container * {
  opacity: 1 !important;
}

/* Emergency override: if the input text is still not visible this block forces
   readable text and disables blending/filtering that can dim text on some themes
   or browser heuristics. Targets known IDs/classes used in the project. */
body.dark-mode input#searchEmployee,
body.dark-mode input#searchInput,
body.dark-mode input.search-input,
body.dark-mode .search-container input.search-input,
body.dark-mode .search-container input[type="text"],
body.dark-mode .search-container input[type="search"] {
  color: #ffffff !important;                    /* visible text */
  -webkit-text-fill-color: #ffffff !important;  /* safari */
  caret-color: #ffffff !important;               /* caret */
  opacity: 1 !important;                         /* remove accidental dimming */
  mix-blend-mode: normal !important;             /* prevent blend modes */
  filter: none !important;                       /* remove CSS filters */
  text-shadow: none !important;                  /* clear any shadow that masks text */
  background-color: #232E2F !important;
  border-color: rgba(255,255,255,0.14) !important;
}

/* Make sure placeholder stays light gray even after stronger overrides */
body.dark-mode input#searchEmployee::placeholder,
body.dark-mode input#searchInput::placeholder,
body.dark-mode .search-container input::placeholder,
body.dark-mode .search-container .search-input::placeholder {
  color: #bfc6c7 !important;
  opacity: 1 !important;
}

/* If the input is still hidden, a parent may use a color with higher specificity
   — inspecting computed styles in DevTools will show the offender. */

/* Guide tooltip specific styles in dark mode */
body.dark-mode .guide-tooltip {
    background: rgba(0, 0, 0, 0.85) !important;
    border: 2px solid #26B07A !important;
    color: #ffffff !important;
}
body.dark-mode .guide-tooltip-inner {
    background: transparent !important;
}

/* Strong reset: remove any background / panel behind nav items entirely.
   This targets the navbar right area and all descendants and uses !important
   to ensure it overrides other rules that introduced the black rectangle. */
/* Strong reset: remove any background / panel behind nav items only when dark mode is active.
   Avoid applying the reset in light mode which was causing unexpected transparent/blank
   areas behind the navbar items. */
body.dark-mode .app-navbar .nav-right,
body.dark-mode .app-navbar .nav-right * {
  background: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
}

/* Keep spacing and readable colors for links/buttons */
/* Nav links: color/padding/display override should only apply in dark mode. */
body.dark-mode .app-navbar .nav-right .nav-link {
  color: #ffffff !important;
  padding: 8px 12px !important;
  display: inline-block !important;
}

/* Ensure logout button and toggle remain visible but not covered */
body.dark-mode .app-navbar .nav-right .logout-btn,
.app-navbar .nav-right .logout-btn {
  background: #ffffff !important;
  color: var(--accent) !important;
  border-radius: 25px !important;
  padding: 8px 20px !important;
  box-shadow: 0 4px 12px rgba(0,0,0,0.12) !important;
  transition: all 0.3s ease !important;
}

body.dark-mode .app-navbar .nav-right #theme-toggle,
.app-navbar .nav-right #theme-toggle {
  background: #ffffff !important;
  color: var(--accent-dark) !important;
  border-radius: 30px !important;
}

/* Narrow the strong override: only make the overlay fully transparent when the
   HISTORY guide is explicitly active. This prevents accidentally removing the
   dimming mask on other pages (like the dashboard) while keeping the special
   history behavior intact. */
body[data-guide-active="history"] .user-guide-overlay,
body[data-guide-active="history"] .user-guide-overlay *:not(.highlight-overlay),
body[data-guide-active="history"] #userGuideOverlay {
  background: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
}

/* Ensure the highlight outline renders (green border + small glow) while keeping the large mask transparent */
#highlightOverlay,
.highlight-overlay,
.guide-highlight {
  border: 3px solid #2EB28A !important;
  border-radius: 12px !important;
  /* show the green outline and dim the rest of the page */
  box-shadow: 0 0 0 4px rgba(46,178,138,0.3), 0 0 0 9999px rgba(0,0,0,0.6) !important;
  background: transparent !important;
}

/* Strong override: ensure search input is visible in dark mode even if other rules conflict.
   Placed at the end of the file so it has highest priority (uses multiple specific selectors).
   If the input still appears hidden, try a hard refresh (Ctrl+F5) or check markup for a different
   class/selector. */
body.dark-mode .search-container input.search-input,
body.dark-mode .search-container input[type="text"],
body.dark-mode .search-container input[type="search"],
body.dark-mode .search-container .search-input,
body.dark-mode .search-add-container .search-input {
  background-color: #2b2f31 !important; /* slightly lighter dark background */
  color: #ffffff !important;            /* white text */
  border: 1px solid rgba(255,255,255,0.12) !important; /* slightly stronger thin border */
  border-radius: 8px !important;
  padding: 10px 14px !important;
  box-shadow: inset 0 1px 0 rgba(0,0,0,0.3), 0 1px 0 rgba(255,255,255,0.02) !important;
  background-image: none !important;
  opacity: 1 !important;
}

/* FINAL EMERGENCY OVERRIDE FOR USER-GUIDE MODAL BACKGROUND IN DARK MODE
   Some guide styles are defined in `userGuide.css` and may load after this file.
   To guarantee the modal and its inner panels use #232E2F, apply a very high-specificity
   rule that targets the overlay, tooltip, inner, header and footer. This uses
   an explicit `html body.dark-mode` prefix to increase specificity above other rules. */
html body.dark-mode .user-guide-overlay .guide-tooltip,
html body.dark-mode .guide-tooltip,
html body.dark-mode .user-guide-overlay .guide-content,
html body.dark-mode .guide-tooltip-inner,
html body.dark-mode .guide-header,
html body.dark-mode .guide-footer,
html body.dark-mode .guide-body,
html body.dark-mode .guide-content {
  background: #232E2F !important;
  color: #e6efec !important;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6) !important;
  border-color: #263033 !important;
}

/* Also ensure the tooltip arrows (before/after) don't create a navy seam */
html body.dark-mode .guide-tooltip.position-bottom::before,
html body.dark-mode .guide-tooltip.position-top::before {
  border-bottom-color: #232E2F !important;
  border-top-color: #232E2F !important;
}

/* Force titles to be bright white in dark mode (history page, guides, cards, headings) */
html body.dark-mode .history-title,
html body.dark-mode .history-subtitle,
html body.dark-mode .guide-title,
html body.dark-mode h1,
html body.dark-mode .card-title {
  color: #ffffff !important;
  opacity: 1 !important;
}

/* Also ensure header/subtitle contrast isn't reduced by parent opacity or filters */
html body.dark-mode .history-header,
html body.dark-mode .guide-header,
html body.dark-mode .card {
  opacity: 1 !important;
  filter: none !important;
  mix-blend-mode: normal !important;
}

/* Force filter labels and small form labels to be white in dark mode */
html body.dark-mode .filter-label,
html body.dark-mode .filters-card .filter-label,
html body.dark-mode .filter-group label,
html body.dark-mode .filter-input::placeholder {
  color: #ffffff !important;
  opacity: 1 !important;
}

/* Placeholder color variations for different browsers */
body.dark-mode .search-container input::placeholder,
body.dark-mode .search-container input::-webkit-input-placeholder,
body.dark-mode .search-container input:-ms-input-placeholder,
body.dark-mode .search-container .search-input::placeholder,
body.dark-mode .search-container .search-input::-webkit-input-placeholder,
body.dark-mode .search-container .search-input:-ms-input-placeholder {
  color: #bfc6c7 !important; /* light gray placeholder */
  opacity: 1 !important;
}

body.dark-mode .search-container input:focus,
body.dark-mode .search-container .search-input:focus {
  border-color: rgba(46,178,138,0.22) !important;
  box-shadow: 0 0 0 4px rgba(46,178,138,0.06) !important;
}

/* Fix: ensure context menus / popups inside tables are not clipped at the bottom
   and always render above table content. This prevents the white menu from being
   cut off when it appears near the bottom of a scrolled container. */
.table-container,
.table-wrapper,
.table-responsive,
.dashboard-main,
.main-container,
.content-wrapper {
  overflow: visible !important; /* allow child popups to overflow outside */
}

/* Force popups/menus to render above other content and ensure they are positioned
   correctly. Add common menu/dropdown selectors used across the app. */
.popup-overlay,
.popup-container,
.popup-content,
.dropdown-menu,
.context-menu,
.action-menu,
.menu,
.menu-content {
  z-index: 99999 !important;
  position: absolute !important;
}

/* Style for dropdowns/menus so they remain visible and readable */
.dropdown-menu,
.context-menu,
.action-menu {
  background: #ffffff !important;
  color: #222 !important;
  box-shadow: 0 8px 24px rgba(0,0,0,0.35) !important;
  border-radius: 8px !important;
}

/* If menus are still partially off-screen, this helps anchor them inside viewport. */
.popup-container[style],
.dropdown-menu[style],
.context-menu[style] {
  overflow: visible !important;
}

/* ------------------------------------------------------------------
   Strong dark-mode text color overrides
   Ensure all readable text becomes white when dark mode is active. This
   block is intentionally specific and placed at the end so it overrides
   other color rules that may be applied elsewhere.
   ------------------------------------------------------------------ */
html body.dark-mode,
html body.dark-mode .main-container,
html body.dark-mode .app-content,
html body.dark-mode .content-wrapper,
html body.dark-mode .dashboard-main,
html body.dark-mode .card,
html body.dark-mode .panel,
html body.dark-mode .modal-content,
html body.dark-mode .filters-card,
html body.dark-mode .time-log-table,
html body.dark-mode .history-table,
html body.dark-mode .employee-table,
html body.dark-mode .table-container,
html body.dark-mode .table-responsive,
html body.dark-mode .popup-content,
html body.dark-mode .dropdown-menu,
html body.dark-mode .context-menu {
  color: #ffffff !important;                       /* readable white text */
  -webkit-text-fill-color: #ffffff !important;    /* Safari */
}

/* Make anchors and nav links white too */
html body.dark-mode a,
html body.dark-mode .nav-link,
html body.dark-mode .app-navbar .nav-right .nav-link {
  color: #ffffff !important;
}

/* Ensure table cells, headers and small text use white color */
html body.dark-mode table,
html body.dark-mode table td,
html body.dark-mode table th,
html body.dark-mode .employee-table td,
html body.dark-mode .employee-table th {
  color: #ffffff !important;
}

/* Form controls and placeholders */
html body.dark-mode input,
html body.dark-mode textarea,
html body.dark-mode select,
html body.dark-mode .form-control,
html body.dark-mode .form-select {
  color: #ffffff !important;
  -webkit-text-fill-color: #ffffff !important;
}

html body.dark-mode input::placeholder,
html body.dark-mode textarea::placeholder,
html body.dark-mode .form-control::placeholder,
html body.dark-mode .search-container input::placeholder {
  color: #bfc6c7 !important; /* keep placeholder slightly muted */
}

/* Keep important buttons readable (logout button kept white background intentionally) */
html body.dark-mode .logout-btn,
html body.dark-mode .logout-btn * {
  color: inherit !important;
}

/* Targeted fallback: common text elements to ensure visibility in dark mode.
   This keeps borders and background colors untouched while forcing text to
   a readable white where needed. Avoids the heavy-handed universal selector. */
html body.dark-mode h1,
html body.dark-mode h2,
html body.dark-mode h3,
html body.dark-mode h4,
html body.dark-mode h5,
html body.dark-mode h6,
html body.dark-mode p,
html body.dark-mode span,
html body.dark-mode li,
html body.dark-mode label,
html body.dark-mode small,
html body.dark-mode .card-title,
html body.dark-mode .card-value,
html body.dark-mode .card .card-content,
html body.dark-mode .btn,
html body.dark-mode .btn *,
html body.dark-mode .kpi,
html body.dark-mode .kpi * {
  color: #ffffff !important;
  -webkit-text-fill-color: #ffffff !important;
}

